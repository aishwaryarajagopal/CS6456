<!DOCTYPE html>
<meta charset="utf-8">
<title>GestViz</title>
<script src="/static/js/showscreens.js"></script>
<script src="/static/js/criteria.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/three.js/r67/three.js"></script>
<script src="/static/lib/jquery-1.10.2.min.js"></script>
<script src="/static/lib/jquery-ui.min.js"></script>
<script src="/static/lib/d3.v3.min.js"></script>
<script src="/static/lib/d3.tip.v0.6.3.js"></script>
<script src="/static/js/drawvis.js"></script>
<script src="/static/lib/leap-0.6.4.min.js"></script>
<script src="/static/js/drawmain.js"></script>
<script src="/static/js/leapmotion.js"></script>
<script src="/static/js/bootstrap.js"></script>
<script src="/static/js/bootstrap.min.js"></script>

<head>
<link href="/static/css/bootstrap.min.css" rel="stylesheet">
<link href="/static/css/bootstrap.css" rel="stylesheet">
</head>

<style>

body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  margin: auto;
  position: relative;
  width: 960px;
}
#gesture_output{
  font-size: 66px;
  color: #005d98;
  text-align: left;
  position: fixed;
  bottom: 18px;
}


</style>
<body onload="populate_criteria()">
<div id = 'outerbox'>
  <h1>Select field for clustering</h1>
  <div id="radio_home"></div>

<button onclick="show_main_screen()">Show plot</button>
<button onclick="show_filter_screen()">Filter data</button>
</div>


<script type="text/javascript">

var clickevt = new MouseEvent("click", { //can generate any mouse event instead of click
        view: window,
        cancelable: true,
      /* whatever properties you want to give it */
      });
var mouseoverevt = new MouseEvent("mouseover", { //can generate any mouse event instead of click
        view: window,
        cancelable: true,
      /* whatever properties you want to give it */
      });

console.log(radio_home.childNodes.length);

// for (i=0;i<radio_home.childNodes.length; i++) {
//   document.getElementById(""+ i).on('click',executeclick);
//   document.getElementById(""+ i).on('mouseover',executemouseover);
// }

// function executeclick() {
//   console.log("clickevt");
// }

// function executemouseover() {
//   console.log("mouseoverevt");
// }

controller.on('frame',clustergestures);
controller.connect();

function clustergestures(frame) {
  if(frame.valid) {
    if (frame.gestures.length > 0) {
      frame.gestures.forEach(function(gesture){
        if (gesture.type == "swipe") {
            document.location.href = 'index1.html';
            controller.removeListener('frame',clustergestures);
            console.log("Swipe Gesture");
          }
        });
      } else if(frame.hands.length==1 && getExtendedFingers(frame.hands[0])>0) {
        var id = getExtendedFingers(frame.hands[0]);
        if(document.getElementById(id)!= null) {
          document.getElementById(id).click();
        }
        

      // console.log("entered2");
      // var pointable = frame.pointables[0];
      // var interactionBox = frame.interactionBox;
      // var normalizedPosition = interactionBox.normalizePoint(pointable.stabilizedTipPosition, true);

      // // Convert the normalized coordinates to span the canvas
      // var lx = radio_home.clientWidth * normalizedPosition[0];
      // var ly = radio_home.clientHeight * (1 - normalizedPosition[1]);
      // //console.log(lx,ly);

      // if (document.elementFromPoint(lx, ly)!= null) {
      //   //dispatch mouse event to element under pointer x, y co-ordinates
      //   console.log(document.elementFromPoint(lx, ly));
      //   if (isScreenTapGesture(frame.gestures)) {
      //     document.elementFromPoint(lx, ly).click();
      //   } else {
      //     document.elementFromPoint(lx, ly).mouseover();
      //   }
      // }
    }     
  }
}

</script>

</body>